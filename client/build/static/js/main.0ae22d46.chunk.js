(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,t,a){e.exports=a(75)},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),s=a.n(o),l=a(1),c=a(19),i=a(41),u=a.n(i),m=a(42),p=a(12),d=Object(c.c)({story:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_STORIES":return Object(p.a)({},e,{stories:t.payload});case"MAKE_POST":return Object(p.a)({},e,{newPost:t.payload});case"POST_BY_USER":return Object(p.a)({},e,{userStories:t.payload});case"EDIT_POST":return Object(p.a)({},e,{editStory:t.payload});case"UPDATE_POST":return Object(p.a)({},e,{updatedStory:t.payload});case"DELETE_STORY":return Object(p.a)({},e,{deleteStory:t.payload});case"CLEAR_DEL_BOOK":return Object(p.a)({},e,{story:t.payload.story,updatedStory:t.payload.updatedStory,deleteStory:t.payload.deleteStory,editStory:t.payload.editStory});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object(p.a)({},e,{loginUser:t.payload});case"USER_Register":return Object(p.a)({},e,{registerUser:t.payload});case"USER_AUTH":return Object(p.a)({},e,{login:t.payload});default:return e}}}),h=a(3),y=a(4),g=a(6),v=a(5),f=a(7),E=a(10),b=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).items=[{type:"navItem",icon:"sign-in",text:"Login",link:"/login",restricted:!1,exclude:!0},{type:"navItem",icon:"file-text-o",text:"My post Stories",link:"/user/user-stories",restricted:!0},{type:"navItem",icon:"file-text-o",text:"Add Stories",link:"/user/add",restricted:!0},{type:"navItem",icon:"sign-out",text:"Logout",link:"/user/logout",restricted:!0}],a}return Object(f.a)(t,e),Object(y.a)(t,[{key:"getElement",value:function(e,t){return r.a.createElement("li",{className:"nav-item my-2 my-lg-0",key:t},r.a.createElement(E.b,{className:"nav-link mr-sm-2",to:e.link},e.text))}},{key:"showElement",value:function(){var e=this,t=this.props.user;return t.login?this.items.map(function(a,n){return t.login.isAuth?a.restricted?e.getElement(a,n):null:a.restricted?null:e.getElement(a,n)}):null}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar fixed-top navbar-expand-lg navbar-dark bg-dark ",style:{fontFamily:"Mali"}},r.a.createElement(E.b,{className:"navbar-brand",to:"/"},"The Spooky tales"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo02","aria-controls":"navbarTogglerDemo02","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02"},r.a.createElement("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0"},this.showElement()))))}}]),t}(n.Component),O=Object(l.b)(function(e){return{user:e.user}})(b);var S=function(e){return r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement("div",null,e.children))},j=a(18),w=a(29),k=a(13),N=a.n(k);function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"desc",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{type:"GET_STORIES",payload:N.a.get("api/getStories?skip=".concat(t,"&limit=").concat(e,"&order=").concat(a)).then(function(e){return n?[].concat(Object(w.a)(n),Object(w.a)(e.data)):e.data}).catch(function(e){return console.log(e)})}}var T=a(44),_=a.n(T),P=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).renderStories=function(e){var t=a.props.story;return t.stories?t.stories.map(function(e,t){return r.a.createElement("div",{className:"card border-dark mb-3 w-80",key:t,style:{margin:"10px"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},e.content),r.a.createElement("h5",{className:"card-title"},"-",e.author),r.a.createElement("p",{className:"card-text"},r.a.createElement("small",{className:"text-muted",style:{color:"white"}},_()(e.createdAt).format("MMM Do YY")))))}):null},a.loadMore=function(){var e=a.props.story.stories.length;a.props.dispatch(x(2,e,"desc",a.props.story.stories))},a}return Object(f.a)(t,e),Object(y.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(x(3,0,"desc"))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{paddingTop:window.innerWidth<500?"10%":null,margin:"5% 2% 2% 2%"}},this.renderStories(this.props.story),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return e.loadMore()}},"Load more")))}}]),t}(n.Component);var I=Object(l.b)(function(e){return{story:e.story}})(P);var A=function(){return r.a.createElement("div",null,r.a.createElement(I,null))},M=a(16),C=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",errorMsg:"",success:!1},a}return Object(f.a)(t,e),Object(y.a)(t,[{key:"changeHandle",value:function(e){this.setState(Object(M.a)({},e.target.name,e.target.value)),this.validate(this.state.email,this.state.password)}},{key:"submitForm",value:function(e){if(e.preventDefault(),this.state.errorMsg.length>0)this.showError();else{var t={email:this.state.email,password:this.state.password};this.props.dispatch((a=t,{type:"USER_LOGIN",payload:N.a.post("/api/login",a).then(function(e){return e.data}).catch(function(e){return console.log(e)})}))}var a}},{key:"componentWillReceiveProps",value:function(e){e.user.loginUser.isAuth?this.props.history.push("/"):this.showError(e.user.loginUser.message)}},{key:"showError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.errorMsg;document.getElementById("error").innerHTML=e}},{key:"validate",value:function(e,t){e.length>5&&t.length>3?this.setState({errorMsg:"",success:!0}):this.setState({errorMsg:"Check inputs",success:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container",style:{padding:"20%"}},r.a.createElement("div",{id:"error",style:{color:"red"}}),r.a.createElement("div",null,r.a.createElement("h2",null,"Log In")),r.a.createElement("form",{onSubmit:function(t){e.submitForm(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email address"),r.a.createElement("input",{type:"email",name:"email",className:"form-control",id:"exampleInputEmail1",value:this.state.email,onChange:function(t){e.changeHandle(t)},placeholder:"Enter email"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password (Must be of length greater than 5)"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",id:"exampleInputPassword1",value:this.state.password,onChange:function(t){e.changeHandle(t)},placeholder:"Password"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Log in")),r.a.createElement("div",{style:{fontStyle:"bold",padding:"10px"}},r.a.createElement(E.b,{to:"/register"}," Click Here to Sign up ")))}}]),t}(n.Component),U=Object(l.b)(function(e){return{user:e.user}})(C),R=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",firstname:"",lastname:"",errorMsg:"",success:!1},a}return Object(f.a)(t,e),Object(y.a)(t,[{key:"changeHandle",value:function(e){this.setState(Object(M.a)({},e.target.name,e.target.value)),this.validate(this.state.email,this.state.password,this.state.firstname,this.state.lastname)}},{key:"submitForm",value:function(e){if(e.preventDefault(),this.state.errorMsg.length>0)this.showError();else{var t={email:this.state.email,password:this.state.password,firstname:this.state.firstname,lastname:this.state.lastname};this.props.dispatch((a=t,{type:"USER_Register",payload:N.a.post("/api/registerUser",a).then(function(e){return e.data}).catch(function(e){return console.log(e)})}))}var a}},{key:"componentWillReceiveProps",value:function(e){e.user.registerUser?this.props.history.push("/"):this.showError(e.user.registerUser.message)}},{key:"showError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.errorMsg;document.getElementById("error").innerHTML=e}},{key:"validate",value:function(e,t,a,n){e.length>5&&t.length>3&&a.length>1&&n.length>1?this.setState({errorMsg:"",success:!0}):this.setState({errorMsg:"Check inputs",success:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container",style:{padding:"20%"}},r.a.createElement("div",{id:"error",style:{color:"red"}}),r.a.createElement("form",{onSubmit:function(t){e.submitForm(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email address"),r.a.createElement("input",{type:"email",name:"email",className:"form-control",id:"exampleInputEmail1",value:this.state.email,onChange:function(t){e.changeHandle(t)},placeholder:"Enter email"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password (Must be of length greater than 5)"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",id:"exampleInputPassword1",value:this.state.password,onChange:function(t){e.changeHandle(t)},placeholder:"Password"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"First Name"),r.a.createElement("input",{type:"text",name:"firstname",className:"form-control",value:this.state.firstname,onChange:function(t){e.changeHandle(t)},placeholder:"firstname"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{type:"text",name:"lastname",className:"form-control",value:this.state.lastname,onChange:function(t){e.changeHandle(t)},placeholder:"lastname"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sing Up")))}}]),t}(n.Component),D=Object(l.b)(function(e){return{user:e.user}})(R),H=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={content:"",author:"",ownderId:""},a}return Object(f.a)(t,e),Object(y.a)(t,[{key:"changeInput",value:function(e){this.setState(Object(M.a)({},e.target.name,e.target.value))}},{key:"componentWillReceiveProps",value:function(e){e.story.newPost&&this.props.history.push("/")}},{key:"submitForm",value:function(e){e.preventDefault();var t,a={content:this.state.content,author:this.state.author,ownderId:this.props.user.login.id};this.props.dispatch((t=a,{type:"MAKE_POST",payload:N.a.post("/api/postStories",t).then(function(e){return e.data}).catch(function(e){return console.log(e)})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container",style:{padding:"18% 4% 4% 2%"}},r.a.createElement("form",{onSubmit:function(t){e.submitForm(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Author"),r.a.createElement("input",{type:"text",name:"author",value:this.state.author,onChange:function(t){e.changeInput(t)},className:"form-control",placeholder:"for example hakunamatata"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"content"),r.a.createElement("textarea",{className:"form-control",name:"content",value:this.state.content,onChange:function(t){e.changeInput(t)},rows:"3"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",style:{textAlign:"center"}},"Post Story")))}}]),t}(n.Component),L=Object(l.b)(function(e){return{story:e.story}})(H);var W=function(e){return N.a.get("/api/logout").then(function(t){setTimeout(function(){e.history.push("/")},2e3)}),r.a.createElement("div",{className:"container",style:{padding:"25%"}},r.a.createElement("h1",null,"Bye Bye"))},B=function(e,t){var a=function(a){function n(){var e,t;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(g.a)(this,(e=Object(v.a)(n)).call.apply(e,[this].concat(r)))).state={loading:!0},t}return Object(f.a)(n,a),Object(y.a)(n,[{key:"componentWillMount",value:function(){this.props.dispatch({type:"USER_AUTH",payload:N.a.get("/api/auth").then(function(e){return e.data})})}},{key:"componentWillReceiveProps",value:function(e){this.setState({loading:!1}),e.user.login.isAuth?!1===t&&this.props.history.push("/"):!0===t&&this.props.history.push("/login")}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",{className:"loader"}," loading...."):r.a.createElement("div",null,r.a.createElement(e,Object.assign({},this.props,{user:this.props.user})))}}]),n}(n.Component);return Object(l.b)(function(e){return{user:e.user}})(a)},F=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(y.a)(t,[{key:"componentWillMount",value:function(){var e;this.props.dispatch((e=this.props.user.login.id,{type:"POST_BY_USER",payload:N.a.get("/api/getStoryByUser?id=".concat(e)).then(function(e){return e.data}).catch(function(e){return console.log(e)})}))}},{key:"showPosts",value:function(){var e=this.props.story;return e.userStories?e.userStories.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(E.b,{to:"/user/edit-stories/".concat(e._id)},e.author)),r.a.createElement("td",null,r.a.createElement(E.b,{to:"/user/edit-stories/".concat(e._id)},e.content)))}):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{style:{padding:"25% 5% 5% 2%"}},r.a.createElement("h3",null,"You Have Posted these :")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-sm-4"},r.a.createElement("table",{className:"table table-dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Author"),r.a.createElement("th",{scope:"col"},"Content"))),r.a.createElement("tbody",null,this.showPosts())))))}}]),t}(n.Component),Y=Object(l.b)(function(e){return{story:e.story}})(F),G=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={_id:a.props.match.params.id,content:"",author:"",ownderId:""},a.redirectUser=function(){setTimeout(function(){a.props.history.push("/user/user-stories")},2e3)},a}return Object(f.a)(t,e),Object(y.a)(t,[{key:"componentWillMount",value:function(){var e;this.props.dispatch((e=this.props.match.params.id,{type:"EDIT_POST",payload:N.a.get("/api/getStory?id=".concat(e)).then(function(e){return e.data}).catch(function(e){return console.log(e)})}))}},{key:"changeInput",value:function(e){this.setState(Object(M.a)({},e.target.name,e.target.value))}},{key:"componentWillReceiveProps",value:function(e){var t=e.story.updatedStory?e.story.updatedStory:e.story.editStory;this.setState({content:t.content,author:t.author,ownderId:this.props.user.login.id})}},{key:"submitForm",value:function(e){var t;e.preventDefault(),this.props.dispatch((t=this.state,{type:"UPDATE_POST",payload:N.a.post("/api/Story_update",t).then(function(e){return e.data}).catch(function(e){return console.log(e)})}))}},{key:"deleteStory",value:function(){var e;this.props.dispatch((e=this.props.match.params.id,{type:"DELETE_STORY",payload:N.a.delete("/api/Story_delete?id=".concat(e))}))}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_DEL_BOOK",payload:{story:null,updatedStory:!1,deleteStory:!1,editStory:null}})}},{key:"render",value:function(){var e=this,t=this.props.story;return r.a.createElement("div",{className:"container",style:{padding:"18% 4% 4% 2%"}},t.updatedStory?r.a.createElement("div",{className:"edit_confirm",style:{color:"green"}},"post updated",r.a.createElement(E.b,{to:"/"},"click to see!!")):null,t.deleteStory?r.a.createElement("div",{className:"red_tag",style:{color:"red"}},"Post Deleted",this.redirectUser()):null,r.a.createElement("form",{onSubmit:function(t){e.submitForm(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Author"),r.a.createElement("input",{type:"text",name:"author",value:this.state.author,onChange:function(t){e.changeInput(t)},className:"form-control",placeholder:"for example hakunamatata"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"content"),r.a.createElement("textarea",{className:"form-control",name:"content",value:this.state.content,onChange:function(t){e.changeInput(t)},rows:"3"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",style:{textAlign:"center"}},"Post Story"),r.a.createElement("span",null),r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){e.deleteStory()},style:{textAlign:"center"}},"delete Story")))}}]),t}(n.Component),K=Object(l.b)(function(e){return{story:e.story}})(G);var J=function(){return r.a.createElement(E.a,null,r.a.createElement(S,null,r.a.createElement(j.c,null,r.a.createElement(j.a,{path:"/",exact:!0,component:B(A,null)}),r.a.createElement(j.a,{path:"/login",exact:!0,component:B(U,!1)}),r.a.createElement(j.a,{path:"/register",exact:!0,component:B(D,!1)}),r.a.createElement(j.a,{path:"/user/add",exact:!0,component:B(L,!0)}),r.a.createElement(j.a,{path:"/user/user-stories",exact:!0,component:B(Y,!0)}),r.a.createElement(j.a,{path:"/user/edit-stories/:id",exact:!0,component:B(K,!0)}),r.a.createElement(j.a,{path:"/user/logout",exact:!0,component:B(W,!0)}))))},q=Object(c.a)(u.a,m.a)(c.d);s.a.render(r.a.createElement(l.a,{store:q(d)},r.a.createElement(J,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.0ae22d46.chunk.js.map